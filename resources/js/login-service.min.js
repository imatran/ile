var $jscomp$destructuring$var0=require("./angular-app.js"),app=$jscomp$destructuring$var0.app;
(function(){var g=function(d,c,e){return{login:function(a,e,b){d.post("/api/authenticate",{username:a,password:e}).success(function(a){b(a)})},setCredentials:function(a,f){f=Base64.encode(a+":"+f);e.globals={currentUser:{username:a,authdata:f}};d.defaults.headers.common.Authorization="Basic "+f;a=new Date;a.setDate(a.getDate()+7);c.putObject("globals",e.globals,{expires:a})},clearCredentials:function(){e.globals={};c.remove("globals");d.defaults.headers.common.Authorization="Basic"}}};g.$inject=["$http",
"$cookies","$rootScope"];app.factory("LoginService",g)})();
(function(){var g=function(d,c,e,a,f){return{login:function(b,e,h){a(function(){var a;f.getByUsername(b).then(function(b){a=null!==b&&b.password===e?{success:!0}:{success:!1,message:"Username or password is incorrect!"};h(a)})},1E3)},setCredentials:function(b,a){a=Base64.encode(b+":"+a);e.globals={currentUser:{username:b,authdata:a}};d.defaults.headers.common.Authorization="Basic "+a;b=new Date;b.setDate(b.getDate()+7);c.putObject("globals",e.globals,{expires:b})},clearCredentials:function(){e.globals=
{};c.remove("globals");d.defaults.headers.common.Authorization="Basic"}}};g.$inject=["$http","$cookies","$rootScope","$timeout","MockUserService"];app.factory("MockLoginService",g)})();
(function(){var g=function(d){var c=function(a){return a.data},e=function(a){return function(){return{success:!1,message:a}}};return{getAll:function(){return d.get("/api/users").then(c,e("Error getting all users"))},getById:function(a){return d.get("/api/users/"+a).then(c,e("Error getting user by id"))},getByUsername:function(a){return d.get("/api/users/"+a).then(c,e("Error getting user by username"))},create:function(a){return d.post("/api/users",a).then(c,e("Error creating user"))},update:function(a){return d.put("/api/users/"+
a.id,a).then(c,e("Error updating user"))},delete:function(a){return d.delete("/api/users/"+a).then(c,e("Error deleting user"))}}};g.$inject=["$http"];app.factory("UserService",g)})();
(function(){var g=function(d,c,e){var a={getAll:function(){var a=e.defer();a.resolve(f());return a.promise},getById:function(a){var b=e.defer();a=c("filter")(f(),{id:a});b.resolve(a.length?a[0]:null);return b.promise},getByUsername:function(a){var b=e.defer();a=c("filter")(f(),{username:a});b.resolve(a.length?a[0]:null);return b.promise},create:function(b){var c=e.defer();d(function(){a.getByUsername(b.username).then(function(a){null!==a?c.resolve({success:!1,message:'Username "'+b.username+'" is already taken'}):
(a=f(),b.id=(a[a.length-1]||{id:0}).id+1,a.push(b),localStorage.users=JSON.stringify(a),c.resolve({success:!0}))})},1E3);return c.promise},update:function(a){for(var b=e.defer(),c=f(),d=0;d<c.length;d++)if(c[d].id===a.id){c[d]=a;break}localStorage.users=JSON.stringify(c);b.resolve();return b.promise},delete:function(a){for(var b=e.defer(),c=f(),d=0;d<c.length;d++)if(c[d].id===a){c.splice(d,1);break}localStorage.users=JSON.stringify(c);b.resolve();return b.promise}},f=function(){localStorage.users||
(localStorage.users=JSON.stringify([]));return JSON.parse(localStorage.users)};return a};g.$inject=["$timeout","$filter","$q"];app.factory("MockUserService",g)})();
