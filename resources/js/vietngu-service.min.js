var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.owns=function(a,d){return Object.prototype.hasOwnProperty.call(a,d)};$jscomp.assign="function"==typeof Object.assign?Object.assign:function(a,d){for(var f=1;f<arguments.length;f++){var e=arguments[f];if(e)for(var c in e)$jscomp.owns(e,c)&&(a[c]=e[c])}return a};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,d,f){a!=Array.prototype&&a!=Object.prototype&&(a[d]=f.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,d,f,e){if(d){f=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var c=a[e];c in f||(f[c]={});f=f[c]}a=a[a.length-1];e=f[a];d=d(e);d!=e&&null!=d&&$jscomp.defineProperty(f,a,{configurable:!0,writable:!0,value:d})}};$jscomp.polyfill("Object.assign",function(a){return a||$jscomp.assign},"es6","es3");var $jscomp$destructuring$var0=require("./angular-app.js"),app=$jscomp$destructuring$var0.app,$jscomp$destructuring$var1=require("./app-secret.js"),airtable=$jscomp$destructuring$var1.airtable;
(function(){var a=function(a,f,e,c){var d={},g={url:atob(airtable.url.vietngu),key:atob(airtable.key),token:airtable.token,tables:{student:{fields:["oen","name","lang","grade","active"]},reportcard:{fields:"oen lang absent skill oral reading writing signature".split(" ")}}};f.defaults.headers.common.Authorization="Basic "+g.token;d.loadStudents=function(b){var c=a.defer();e.getData("student",g).then(function(a){a=a.reduce(function(a,c){c.active&&c.lang===b&&a.push(c);return a},[]);e.sortByLocale(a,
["grade","name"]);c.resolve(a)});return c.promise};d.loadReports=function(){var b=a.defer(),c=[];e.getData("reportcard",g).then(function(a){a.forEach(function(b){b=k(b);c.push(b)});e.sortByLocale(c,"name");b.resolve(c)});return b.promise};d.getReport=function(b){var c=a.defer();e.getData("reportcard",g,b).then(function(b){b=k(b[0]);c.resolve(b)});return c.promise};d.createReport=function(b){var c=a.defer(),d={fields:l(b)};e.createData("reportcard",g,d).then(function(a){b.refId=a.id;c.resolve()});
return c.promise};d.updateReport=function(b,c){c={fields:l(c)};return e.updateData("reportcard",g,b,c)};var k=function(b){var a=JSON.parse(c.isEmpty(b.absent)?"{}":b.absent),d=JSON.parse(c.isEmpty(b.skill)?"{}":b.skill),e=JSON.parse(c.isEmpty(b.oral)?"{}":b.oral),f=JSON.parse(c.isEmpty(b.reading)?"{}":b.reading),g=JSON.parse(c.isEmpty(b.writing)?"{}":b.writing),h=JSON.parse(c.isEmpty(b.signature)?"{}":b.signature);b=c.pick(b,"refId","oen","lang");Object.assign(b,c.pick(a,"absent_1","absent_2"));Object.assign(b,
c.pick(d,"skill_11","skill_12","skill_21","skill_22","skill_31","skill_32","skill_41","skill_42"));Object.assign(b,c.pick(e,"oral_g1","oral_c1","oral_g2","oral_c2"));Object.assign(b,c.pick(f,"reading_g1","reading_c1","reading_g2","reading_c2"));Object.assign(b,c.pick(g,"writing_g1","writing_c1","writing_g2","writing_c2"));Object.assign(b,c.pick(h,"date_t1","date_t2"));return b},l=function(b){var a=c.pick(b,"oen","lang"),d=c.pick(b,"absent_1","absent_2"),e=c.pick(b,"skill_11","skill_12","skill_21",
"skill_22","skill_31","skill_32","skill_41","skill_42"),f=c.pick(b,"oral_g1","oral_c1","oral_g2","oral_c2"),g=c.pick(b,"reading_g1","reading_c1","reading_g2","reading_c2"),h=c.pick(b,"writing_g1","writing_c1","writing_g2","writing_c2");b=c.pick(b,"date_t1","date_t2");a.absent=JSON.stringify(d);a.skill=JSON.stringify(e);a.oral=JSON.stringify(f);a.reading=JSON.stringify(g);a.writing=JSON.stringify(h);a.signature=JSON.stringify(b);return a};return d};a.$inject=["$q","$http","AirtableService","AppUtil"];
app.factory("VietNguService",a)})();
